<h1 align="center">
    <a href="https://trackmage.com" target="_blank">
        <img src="https://trackmage.com/landing/img/email_logo_46h.png" />
    </a>
</h1>

# TrackMage SDK for php

[![Build Status](https://travis-ci.org/trackmage/trackmage-sdk-php.svg?branch=master)](https://travis-ci.org/trackmage/trackmage-sdk-php)
[![Total Downloads](https://poser.pugx.org/trackmage/trackmage-sdk-php/downloads)](https://packagist.org/packages/trackmage/trackmage-sdk-php)

TrackMage is your most automated shipment tracking tool ever.
Discover the simple way to show your customers where their parcels are, provide support and get more great reviews


## Getting Started

1. **Create a TrackMage account** – First of all, you need to
   [sign up](https://app.trackmage.com) for a TrackMage account
   and retrieve your clientId and clientSecret.
1. **Minimum requirements** – To run the SDK you need to have installed **PHP >= 5.6**.
   We highly recommend using v7.2 or higher. 
1. **Install the SDK** – Using [Composer] is the recommended way to install the
   TrackMage SDK for PHP. The SDK is available on Packagist as the
   [`trackmage/trackmage-sdk-php`](http://packagist.org/packages/trackmage-sdk-php) package
   ```
   composer require trackmage/trackmage-sdk-php
   ```
1. **See the docs** There are [API documentation](https://api.trackmage.com/) and [the generated API client docs](docs)

## Quick examples

### Create a client

```
use TrackMage\Client\TrackMageClient;

$clientId = '<client-it>';
$clientSecret = '<client-secret>';
$client = new TrackMageClient($clientId, $clientSecret);
$client->setHost('https://api.stage.trackmage.com'); //optionally
$client->setLogger(new NullLogger()); //optionally
```

### Posting a tracking number

```
$workspaceId = 100;

$tn = new TrackingNumberPostTrackingNumberSetTrackingNumberMeta();
$tn->setTrackingNumber('TN-1');
$tn->setWorkspace('/workspaces/'.$workspaceId);
$tn = $client->getTrackingNumberApi()->postTrackingNumberCollection($tn);

$items = $client->getTrackingNumberApi()->apiWorkspacesTrackingNumbersGetSubresource($workspaceId);
```

### Get workspaces list

```
$workspaces = $client->getWorkspaceApi()->getWorkspaceCollection();
```

## Tests

To run the unit tests:

```bash
composer install
./vendor/bin/phpunit
```


## API Generation


This PHP package is automatically generated by the [OpenAPI Generator](https://github.com/OpenAPITools/openapi-generator) project:

### How to generate:

Download OpenAPI Generator CLI:
```
wget http://central.maven.org/maven2/org/openapitools/openapi-generator-cli/4.0.0-beta3/openapi-generator-cli-4.0.0-beta3.jar -O openapi-generator-cli.jar
``` 
 
and run the following:
```
java -jar openapi-generator-cli.jar generate \
   -i https://api.stage.trackmage.com/docs.json \
   -g php \
   -c .openapi-config.json \
   --skip-validate-spec \
   -o .
```

where `-c .openapi-config.json` is config with php options. See all options:
```
java -jar openapi-generator-cli.jar config-help -l php
```
